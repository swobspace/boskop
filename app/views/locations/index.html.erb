<h1><%= t('controller.locations') %></h1>

<table id="dataTable" class="table table-bordered table-striped dataTable">
<thead>
  <tr>
    <th><%= t('attributes.name') %></th>
    <th><%= t('attributes.plz') %></th>
    <th><%= t('attributes.ort') %></th>
    <th><%= t('attributes.streetaddress') %></th>
    <%= content_tag_for(:th, Merkmalklasse.visibles(:location, 'index')) do |mklasse| %>
      <%= mklasse.to_s %>
    <% end %>
    <th></th>
  </tr>
</thead>
<tbody>

<% @locations.each do |location| %>
  <%= content_tag_for(:tr, location) do %>
    <td><%= location.name %></td>
    <td><%= location.addresses.first.try(:plz) %></td>
    <td><%= location.addresses.first.try(:ort) %></td>
    <td><%= location.addresses.first.try(:streetaddress) %></td>
    <%= content_tag_for(:td, Merkmalklasse.visibles(:location, 'index')) do |mklasse| %>
      <%= location.merkmale.where(merkmalklasse_id: mklasse.id).pluck(:value).join("; ").to_s %>
    <% end %>
    <td class="nowrap">
      <%= show_link location %>
      <%= edit_link location %>
      <%= delete_link location %>
    </td>
  <% end %>
<% end %>
</tbody>
</table>

<br />

<%= back_link %>
<%= new_link Location %>
